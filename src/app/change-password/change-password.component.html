<div class="change-password-container" role="dialog" aria-modal="true" aria-labelledby="cp-title">
  <div class="change-password-form">
    <h3 id="cp-title">Cambiar Contraseña</h3>

    <form (ngSubmit)="onChange()" novalidate>
      <label for="newPassword">Nueva Contraseña</label>
      <input
        id="newPassword"
        type="password"
        name="newPassword"
        [(ngModel)]="newPassword"
        required
        class="input"
        aria-describedby="requirements"
      />

      <label for="confirmPassword">Confirmar Contraseña</label>
      <input
        id="confirmPassword"
        type="password"
        name="confirmPassword"
        [(ngModel)]="confirmPassword"
        required
        class="input"
      />

      <div id="requirements" class="requirements">
        <p>Requisitos:</p>
        <ul>
          <li [class.valid]="newPassword.length >= 8">Al menos 8 caracteres</li>
          <li [class.valid]="hasUppercase(newPassword)">Al menos una mayúscula</li>
          <li [class.valid]="hasNumber(newPassword)">Al menos un número</li>
          <li [class.valid]="specialRegex.test(newPassword)">Al menos un carácter especial</li>
          <li [class.valid]="passwordsMatch()">Las contraseñas coinciden</li>
        </ul>
      </div>

      <div class="actions">
        <button type="submit" [disabled]="!isValid()" class="btn-primary">Cambiar</button>
        <button type="button" (click)="onCancel()" class="btn-ghost">Cancelar</button>
      </div>
    </form>

    <div *ngIf="error" class="error" role="alert">{{ error }}</div>
    <div *ngIf="success" class="success" role="status">{{ success }}</div>
  </div>
</div>