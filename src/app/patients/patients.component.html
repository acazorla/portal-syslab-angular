<header class="site-header">

  <div class="header-content">
    <h1>Pacientes Atendidos y Ex치menes M칠dicos</h1>
    <p class="header-subtitle">Sistema de gesti칩n de pacientes y ex치menes m칠dicos</p>
  </div>

  <div class="header-actions">
    <input 
      class="search-input" 
      [(ngModel)]="searchTerm" 
      (input)="filterPatients()" 
      placeholder="游댌 Buscar paciente por nombre o ID..."
      type="text"
    >
        <!-- Filtro por rango de fechas -->
    <div class="date-filter">
      <label for="startDate">Desde:</label>
      <input 
        id="startDate"
        type="date" 
        [(ngModel)]="startDate" 
        (change)="filterPatients()"
        class="date-input"
      >
      
      <label for="endDate">Hasta:</label>
      <input 
        id="endDate"
        type="date" 
        [(ngModel)]="endDate" 
        (change)="filterPatients()"
        class="date-input"
      >
      <button class="btn-clear-dates" (click)="clearSearch()">Limpiar filtros</button>
   </div>
  </div>
</header>

<main class="container">
  <div class="results-info">
    <span class="results-count">
      Mostrando {{ filteredPatients().length }} de {{ patients().length }} pacientes
    </span>
  </div>

  <div *ngIf="filteredPatients().length > 0; else noResults" class="patients-grid">
    <div *ngFor="let patient of filteredPatients()" class="patient-card">
      <div class="card-header">
        <h3>{{ patient.nombrePaciente }}</h3>
        <span class="badge">{{ patient.examenes.length }} ex치menes</span>
      </div>

      <p class="patient-id">
        <strong>ID del Paciente:</strong>
        <code>{{ patient.id }}</code>
        <strong>Fecha Atenci칩n:</strong>
        <code>{{ patient.fechaAtencion }}</code>
      </p>

      <div class="examenes-section">
        <h4>Ex치menes Disponibles</h4>
        <ul class="examenes-list">
          <li *ngFor="let examen of patient.examenes; let last = last" class="examen-item">
            <a 
              [href]="'assets/pdfs/' + examen.rutaExamen" 
              target="_blank" 
              rel="noopener noreferrer"
              class="examen-link"
            >
              <span class="icon">游늯</span>
              <span class="name">{{ examen.nombre }}</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <ng-template #noResults>
    <div class="no-results">
      <div class="no-results-icon">游댌</div>
      <p class="no-results-text">No se encontraron pacientes que coincidan con tu b칰squeda.</p>
      <button class="btn-clear" (click)="clearSearch()">Limpiar b칰squeda</button>
    </div>
  </ng-template>
</main>

<footer class="site-footer">
  <div class="footer-content">
    <p>&copy; 2026 Portal SysLab - Sistema de Gesti칩n de Pacientes</p>
    <small>칔ltima actualizaci칩n: {{ getCurrentDate() }}</small>
  </div>
</footer>